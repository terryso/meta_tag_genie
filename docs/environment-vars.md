# MetaTag Genie 环境变量

## 配置加载机制

MetaTag Genie 是一个通过 Stdio 与客户端通信的本地服务。在 MVP 阶段，它主要通过 MCP Tool 的参数接收运行时配置（例如文件路径和元数据）。

* **本地开发:**
    * 主要配置通过代码或命令行参数传递给测试脚本和开发入口。
    * 如果未来需要，可以考虑使用 `.env` 文件配合 `dotenv` 库加载开发时特定的环境变量，例如用于控制日志级别或 `exiftool-vendored` 的特定行为。
* **部署 (作为本地服务):**
    * 服务由客户端（如 AI 代理）作为子进程启动。客户端可以通过在启动子进程时设置环境变量来影响服务行为，尽管 MVP 阶段尚无此明确需求。

## 环境变量

在当前的 MVP 设计中，MetaTag Genie **不依赖任何特定于应用运行的环境变量**来执行其核心功能。所有必要的信息（如图片文件路径、要写入的元数据）都通过 MCP Tool (`writeImageMetadata`) 的参数在运行时提供。

未来可能考虑的环境变量（非 MVP 阶段必需）：

| 变量名                  | 描述                                                                 | 示例 / 默认值             | 是否必需 (是/否) | 是否敏感 (是/否) |
| :---------------------- | :------------------------------------------------------------------- | :------------------------ | :----------------- | :------------------ |
| `LOG_LEVEL`             | 控制应用程序的日志输出级别。                                               | `INFO` / `DEBUG`          | 否                 | 否                  |
| `EXIFTOOL_PATH`         | (供 `exiftool-vendored` 使用) 如果系统中的 ExifTool 不在标准路径，可指定其位置。 | `/usr/local/bin/exiftool` | 否                 | 否                  |
| `EXIFTOOL_COMMAND_ARGS` | (供 `exiftool-vendored` 使用) 传递给 ExifTool 的额外命令行参数。              | `-stay_open True -@ -`    | 否                 | 否                  |
| `MCP_STDIO_DEBUG_LOG`   | 如果 MCP SDK 或我们的实现支持，用于输出详细的 Stdio 通信日志。                | `false` / `true`          | 否                 | 否                  |

## 注意事项

* **简单性优先:** MVP 阶段的设计侧重于通过 Tool 参数进行配置，以保持简单性。
* **`.env.example`:** 如果未来引入环境变量，应在项目根目录维护一个 `.env.example` 文件，其中包含所有必需或可选环境变量的占位符和描述，供开发者参考。
* **安全性:** 由于是本地服务，MVP 阶段不涉及典型的 API 密钥或数据库凭证等敏感环境变量。如果未来集成云服务，则需要严格管理相关密钥。

## 变更日志

| 变更内容      | 日期       | 版本  | 描述                                          | 作者        |
| ------------- | ---------- | ----- | --------------------------------------------- | ----------- |
| 初稿          | 2025-05-07 | 0.1   | 基于 MVP 需求创建，当前无特定应用环境变量 | 3-Architect |

---

